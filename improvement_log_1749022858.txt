Starting quick negative sentiment fix...
This should complete in under 5 minutes.

🚀 Quick Negative Sentiment Fix
========================================
1️⃣ Testing model loading...
   ✅ Model loads successfully
2️⃣ Loading test data...
   📊 Loaded 5842 samples
   📊 After cleaning: 5841 samples
   📊 Test set: 1169 samples
   📊 Negative examples in test: 172
3️⃣ Testing promising thresholds...
   🧪 Testing on 200 samples first...
   📊 Getting model predictions...
      Processing 0/200...
      Processing 50/200...
      Processing 100/200...
      Processing 150/200...
   🎯 Testing threshold combinations...
      Thresholds (0.15, 0.40): Neg F1=0.674, Macro F1=0.783
      Thresholds (0.20, 0.40): Neg F1=0.682, Macro F1=0.789
      Thresholds (0.25, 0.40): Neg F1=0.675, Macro F1=0.788
      Thresholds (0.30, 0.40): Neg F1=0.649, Macro F1=0.785
      Thresholds (0.35, 0.40): Neg F1=0.567, Macro F1=0.762

   🏆 Best thresholds for negative detection:
      Negative threshold: 0.2
      Positive threshold: 0.4
      Negative F1: 0.682
      Macro F1: 0.789
4️⃣ Validating on full test set...
   📊 Testing 1169 samples with thresholds (0.20, 0.40)
      Progress: 0/1169
      Progress: 320/1169
      Progress: 640/1169
      Progress: 960/1169

   📊 Full dataset results:
      Accuracy: 0.769
      Negative F1: 0.614
      Neutral F1: 0.822
      Positive F1: 0.790
      Macro F1: 0.742
5️⃣ Testing on clear examples...
   ✅ 'Outstanding quarterly earnings with record profits...' → positive (expected positive)
   ✅ 'Devastating financial losses and bankruptcy filing...' → negative (expected negative)
   ❌ 'Company reported results in line with expectations...' → positive (expected neutral)
   ✅ 'Stock price soared after amazing earnings...' → positive (expected positive)
   ✅ 'Major layoffs and terrible performance...' → negative (expected negative)
   ❌ 'Revenue remained stable this quarter...' → positive (expected neutral)

   🎯 Clear examples accuracy: 4/6 (66.7%)
6️⃣ Saving results...
   ✅ Results saved to outputs/quick_negative_fix_results.json
   ✅ API integration code saved to outputs/api_integration_snippet.py

🎉 Quick fix completed in 98.0 seconds!

📊 IMPROVEMENT SUMMARY:
   Negative F1: 0.380 → 0.614 (+0.234)
   Overall Accuracy: 0.769
   Macro F1: 0.742
   Clear Examples: 66.7%
   🎯 Great improvement! +0.234 F1 points on negatives

📋 Next steps:
   1. Check outputs/quick_negative_fix_results.json for thresholds
   2. Integrate using outputs/api_integration_snippet.py
   3. Test your API with improved thresholds

✅ Success! Your negative detection should be improved.

Log saved to: improvement_log_1749022956.txt
